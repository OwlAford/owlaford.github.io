(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["star"],{"6fe9":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("article",{ref:"starWrap",staticClass:"page-star"},[i("div",{ref:"starCtx",staticClass:"starContent"}),i("div",{staticClass:"btn",on:{click:t.speedUp}},[t._v("点击加速 ("+t._s(t.speed)+")")])])},s=[],n=(i("6c7b"),i("ac6a"),i("c665")),r=i("aa9a"),h=function(){function t(e,i,a,s){Object(n["a"])(this,t),this.x=e,this.y=i,this.slope=i/e,this.opacity=0,this.size=Math.round(s*Math.random()),this.speed=Math.max(Math.random()*a,1)}return Object(r["a"])(t,[{key:"distanceTo",value:function(t,e){return Math.sqrt(Math.pow(t-this.x,2)+Math.pow(e-this.y,2))}},{key:"resetPosition",value:function(e,i,a,s){return t.apply(this,arguments),this}}]),t}(),o={getRandomStar:function(t,e,i,a,s,n){var r=o.getRandomPosition(t,e,i,a);return new h(r.x,r.y,s,n)},getRandomPosition:function(t,e,i,a){return{x:Math.floor(Math.random()*i+t),y:Math.floor(Math.random()*a+e)}}},d=function(){function t(e,i){for(var a in Object(n["a"])(this,t),i=i||{},this.options={maxSize:2,numStars:100,maxStarSpeed:3,bgColor:"rgba(0, 0, 0, .5)"},i)void 0!==i[a]&&(this.options[a]=i[a]);this.$el=e,this.starField=[],this._initContainer()}return Object(r["a"])(t,[{key:"_initContainer",value:function(){var t=this.$el,e=this.$canvans=document.createElement("canvas");t.appendChild(e);var i=parseFloat(this._getComputedStyle(t,"width")),a=parseFloat(this._getComputedStyle(t,"height"));this._width=i,this._height=a,e.width=i,e.height=a,this.ctx=e.getContext("2d")}},{key:"_getComputedStyle",value:function(t,e){var i=window.getComputedStyle(t);return i[e]||""}},{key:"_updateStarField",value:function(){var t,e,i,a;for(t=0;t<this.numStars;t++)e=this.starField[t],a=Math.min(e.speed,Math.abs(e.speed/e.slope)),e.x+=e.x>0?a:-a,e.y=e.slope*e.x,e.opacity+=e.speed/100,(Math.abs(e.x)>this._width/2||Math.abs(e.y)>this._height/2)&&(i=o.getRandomPosition(-this._width/10,-this._height/10,this._width/5,this._height/5),e.resetPosition(i.x,i.y,this.maxStarSpeed,this.maxSize))}},{key:"_renderStarField",value:function(){var t,e,i=this.options.bgColor,a=this.ctx;if("string"!==typeof i){var s=a.createLinearGradient(0,0,0,this._height);i.forEach(function(t,e){s.addColorStop(t.stop,t.color)}),i=s}for(a.fillStyle=i,a.fillRect(0,0,this._width,this._height),t=0;t<this.numStars;t++){e=this.starField[t];var n=e.size,r=e.x+this._width/2,h=e.y+this._height/2;this._fillRound(r,h,n,"rgba(255, 255, 255, ".concat(e.opacity,")"))}}},{key:"_fillRound",value:function(t,e,i,a){var s=this.ctx;s.beginPath(),s.arc(t,e,i,0,2*Math.PI,!0),s.fillStyle=a,s.fill()}},{key:"_renderFrame",value:function(t){var e=t-(this.prevFrameTime||0);this.animateRaf=window.requestAnimationFrame(this._renderFrame.bind(this)),(e>=30||!this.prevFrameTime)&&(this.prevFrameTime=t,this._updateStarField(),this._renderStarField())}},{key:"_initScene",value:function(t){var e;for(e=0;e<this.numStars;e++)this.starField.push(o.getRandomStar(-this._width/2,-this._height/2,this._width,this._height,this.maxStarSpeed,this.maxSize));this.animateRaf=window.requestAnimationFrame(this._renderFrame.bind(this))}},{key:"destroy",value:function(){window.cancelAnimationFrame(this.animateRaf)}},{key:"render",value:function(t,e,i){this.numStars=t||this.options.numStars,this.maxStarSpeed=e||this.options.maxStarSpeed,this.maxSize=i||this.options.maxSize,this._initScene(this.numStars)}}]),t}(),l=d,u={name:"star",data:function(){return{speed:2,num:100}},mounted:function(){var t=this.$refs,e=t.starWrap,i=t.starCtx;e.style.height=document.documentElement.clientHeight+"px",this.starField=new l(i,{maxSize:window.dpr,numStars:100,maxStarSpeed:4,bgColor:[{stop:0,color:"rgb(15, 19, 26)"},{stop:.6,color:"rgb(27, 39, 51)"},{stop:1,color:"rgb(42, 63, 78)"}]}),this.starField.render()},beforeDestroy:function(){this.starField.destroy()},methods:{speedUp:function(){this.speed+=2,this.num-=1,this.starField.render(this.num,this.speed)}}},c=u,p=i("2877"),m=Object(p["a"])(c,a,s,!1,null,null,null);m.options.__file="Star.vue";e["default"]=m.exports}}]);