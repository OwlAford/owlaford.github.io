(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wave"],{"5a2c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"page-wave"},[a("div",{ref:"multiWave",staticClass:"wave-area"}),a("div",{staticClass:"btn",on:{click:e.resetGreen}},[e._v("设置绿色波浪参数")]),a("div",{staticClass:"btn",on:{click:e.resetBlue}},[e._v("设置蓝色波浪参数")]),a("div",{staticClass:"btn",on:{click:e.resetRed}},[e._v("设置红色波浪参数")]),a("div",{staticClass:"btn",on:{click:e.recoveryAll}},[e._v("恢复所有参数初始设置")])])},i=[],o=(a("6c7b"),a("c93e")),n=(a("456d"),a("ac6a"),a("6b54"),a("c665")),v=a("aa9a"),s=function(){function e(t,a){if(Object(n["a"])(this,e),this._parseNum=this._parseNum.bind(this),this._mergeParam=this._mergeParam.bind(this),"[object Array]"!==Object.prototype.toString.call(a))throw new Error("Function Parameter Error!");this.opts=a,this.wavesParam=[],this.$el=t,this._initContainer(),this._initWavesParam(),this._drawWaveFrame()}return Object(v["a"])(e,[{key:"_initContainer",value:function(){var e=this.$el,t=this.$canvans=document.createElement("canvas");e.appendChild(t);var a=parseFloat(this._getComputedStyle(e,"width")),r=parseFloat(this._getComputedStyle(e,"height"));this._width=a,this._height=r,t.width=a,t.height=r,this.ctx=t.getContext("2d")}},{key:"_parseNum",value:function(e,t,a){var r=e;if("number"!==typeof e){var i=this._width;"y"===t&&(i=this._height),a&&(i=a),r=parseFloat(e)/100*i}return r}},{key:"_mergeParam",value:function(e,t){e=e||{};var a=this._parseNum,r=a(t.waveWidth||e.waveWidth),i={waveCount:Math.ceil(this._width/r)+2};return Object.keys(t).forEach(function(e){"waveHeight"===e||"startFromTop"===e||"endFromTop"===e||"moveYStep"===e?i[e]=a(t[e],"y"):"moveXStep"===e?i[e]=a(t[e]):"offsetX"===e?i[e]=-1*a(t[e],null,r):"moveXDirection"===e?i["dir"]="right"===t[e]?-1:1:i[e]="waveWidth"===e?r:t[e]}),Object(o["a"])({},e,i)}},{key:"_initWavesParam",value:function(){var e=this;Array.prototype.forEach.call(this.opts,function(t,a){e.wavesParam[a]=e._mergeParam({id:t.id||a,dir:1,currentMoveX:0,currentMoveY:0},t)})}},{key:"_getComputedStyle",value:function(e,t){var a=window.getComputedStyle(e);return a[t]||""}},{key:"_drawWaveFrame",value:function(){var e=this,t=function t(){var a=e.wavesParam;e.ctx.clearRect(0,0,e._width,e._height),Array.prototype.forEach.call(a,function(t,a){var r=t.offsetX,i=t.currentMoveX,o=t.waveWidth,n=t.waveHeight,v=t.waveCount,s=t.waveColor,c=t.startFromTop,m=t.endFromTop,l=t.moveXStep,h=t.currentMoveY,d=t.moveYStep,u=t.dir,p=r+i+2*(u-1)*o,w=c+h;e._drawWave(p,w,v,n,o,s),Math.abs(i)<2*o?e.wavesParam[a].currentMoveX-=l*u:e.wavesParam[a].currentMoveX=0,Math.abs(c+h-m)<=d?e.wavesParam[a].currentMoveY=m-c:c>m||w>m?e.wavesParam[a].currentMoveY-=d:e.wavesParam[a].currentMoveY+=d}),e.animateRaf=requestAnimationFrame(t)};t()}},{key:"_drawWave",value:function(e,t,a,r,i,o){var n=this.ctx,v=this._height,s=i,c=s/2;n.beginPath(),n.moveTo(e,t);for(var m=0;m<a;m++)n.quadraticCurveTo(e+2*m*s+c,t-r,e+(2*m+1)*s,t),n.quadraticCurveTo(e+(2*m+1)*s+c,t+r,e+(2*m+2)*s,t);if(n.lineTo(2*s*a+e,v),n.lineTo(e,v),n.closePath(),"[object Array]"===Object.prototype.toString.call(o)){var l=n.createLinearGradient(0,0,0,this._height);o.forEach(function(e){l.addColorStop(e.position,e.color)}),n.fillStyle=l}else n.fillStyle=o;n.fill()}},{key:"dynamicSetParamsById",value:function(e,t){var a=this;this.wavesParam.forEach(function(r,i){r.id===e&&(a.wavesParam[i]=a._mergeParam(r,t))})}},{key:"dynamicSetParamsAll",value:function(e){var t=this;e.forEach(function(e){t.dynamicSetParamsById(e.id,e)})}},{key:"destroy",value:function(){window.cancelAnimationFrame(this.animateRaf)}}]),e}(),c=s,m={name:"wave",mounted:function(){var e=this.$refs.multiWave;this.multiWave=new c(e,[{id:"wave-red",waveWidth:"40%",offsetX:"0%",waveHeight:"10%",waveColor:[{color:"rgba(255, 0, 0, 0.33)",position:0},{color:"rgba(255, 255, 255, 0)",position:1}],startFromTop:"80%",endFromTop:"80%",moveYStep:"0.6%",moveXStep:"1%",moveXDirection:"right"},{id:"wave-blue",waveWidth:"40%",offsetX:"30%",waveHeight:"10%",waveColor:[{color:"rgba(0, 0, 255, 0.33)",position:0},{color:"rgba(255, 255, 255, 0)",position:1}],startFromTop:"80%",endFromTop:"80%",moveYStep:"0.6%",moveXStep:"0.8%"},{id:"wave-green",waveWidth:"40%",offsetX:"80%",waveHeight:"10%",waveColor:[{color:"rgba(0, 255, 0, 0.33)",position:0},{color:"rgba(255, 255, 255, 0)",position:1}],startFromTop:"80%",endFromTop:"80%",moveYStep:"0.6%",moveXStep:"1%"}])},beforeDestroy:function(){this.multiWave.destroy()},methods:{resetGreen:function(){this.multiWave.dynamicSetParamsById("wave-green",{waveWidth:"60%",moveXStep:"2.2%",endFromTop:"20%"})},resetBlue:function(){this.multiWave.dynamicSetParamsById("wave-blue",{waveWidth:"60%",moveXStep:"3.2%",endFromTop:"20%"})},resetRed:function(){this.multiWave.dynamicSetParamsById("wave-red",{moveXStep:"1.2%",endFromTop:"20%",waveWidth:"60%"})},recoveryAll:function(){this.multiWave.dynamicSetParamsAll([{id:"wave-green",waveWidth:"40%",moveXStep:"1%",endFromTop:"80%"},{id:"wave-blue",waveWidth:"40%",moveXStep:"0.8%",endFromTop:"80%"},{id:"wave-red",moveXStep:"1%",endFromTop:"80%",waveWidth:"40%"}])}}},l=m,h=a("2877"),d=Object(h["a"])(l,r,i,!1,null,null,null);d.options.__file="Wave.vue";t["default"]=d.exports}}]);